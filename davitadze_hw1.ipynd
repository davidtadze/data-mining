{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**Общая информация**\n",
    "\n",
    "**Срок сдачи:** 20 марта 2019, 06:00 <br\\>\n",
    "**Штраф за опоздание:** -1 балл после 06:00 20 марта, -2 балла после 06:00 27 марта, -3 балла после 06:00 3 апреля\n",
    "-4 балла после 06:00 10 апреля\n",
    "\n",
    "При отправлении ДЗ указывайте фамилию в названии файла\n",
    "Присылать ДЗ необходимо в виде ссылки на свой github репозиторий в slack @alkhamush\n",
    "\n",
    "Необходимо в slack скинуть ссылку в личный чат @alkhamush\n",
    "Пример ссылки:\n",
    "https://github.com/stroykova/spheremailru/stroykova_hw1.ipynb \n",
    "\n",
    "\n",
    "Используйте данный Ipython Notebook при оформлении домашнего задания."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "##### Задание 1 (2 баллов)\n",
    "Реализовать KNN в классе MyKNeighborsClassifier (обязательное условие: точность не ниже sklearn реализации)\n",
    "Разберитесь самостоятельно, какая мера расстояния используется в KNeighborsClassifier дефолтно и реализуйте свой алгоритм именно с этой мерой. Самостоятельно разберитесь, как считается score из KNeighborsClassifier и реализуйте аналог в своём классе. Score не должен уступать значению KNN из sklearn\n",
    "\n",
    "###### Задание 2 (2 балла)\n",
    "Добиться скорости работы на fit,  predict и predict_proba сравнимой со sklearn для iris и mnist\n",
    "Для этого используем numpy\n",
    "\n",
    "###### Задание 3 (2 балла)\n",
    "Для iris найдите такой параметр n_neighbors, при котором выдаётся наилучший score. Нарисуйте график зависимости score от n_neighbors\n",
    "\n",
    "###### Задание 4 (3 балла)\n",
    "Добавить algorithm='kd_tree' в реализацию KNN (использовать KDTree из sklearn.neighbors). Добиться скорости работы на fit,  predict и predict_proba сравнимой со sklearn для iris и mnist\n",
    "Для этого используем numpy. Score не должен уступать значению KNN из sklearn\n",
    "\n",
    "###### Задание 5 (1 балла)\n",
    "Описать для чего нужны следующие библиотеки/классы/функции (список будет ниже)\n",
    "\n",
    "**Штрафные баллы:**\n",
    "\n",
    "1. Невыполнение PEP8 -0.5 баллов\n",
    "2. Отсутствие фамилии в имени скрипта (скрипт должен называться по аналогии со stroykova_hw1.ipynb) -0.5 баллов\n",
    "3. Все строчки должны быть выполнены. Нужно, чтобы output команды можно было увидеть уже в git'е. В противном случае -0.5 баллов\n",
    "4. При оформлении ДЗ нужно пользоваться данным файлом в качестве шаблона. Не нужно удалять и видоизменять структуру кода и текст. В противном случае -0.5 баллов\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "import matplotlib.pyplot as plt\n",
    "\n",
    "import seaborn as sns\n",
    "from sklearn import datasets\n",
    "from sklearn.base import ClassifierMixin\n",
    "from sklearn.datasets import fetch_mldata\n",
    "from sklearn.neighbors.base import NeighborsBase, KNeighborsMixin, SupervisedIntegerMixin \n",
    "from sklearn.model_selection import train_test_split\n",
    "from sklearn.neighbors import KNeighborsClassifier\n",
    "%load_ext pycodestyle_magic"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "#%%pycodestyle\n",
    "\n",
    "from scipy.spatial.distance import cdist\n",
    "from sklearn.preprocessing import normalize\n",
    "from scipy.stats import mode\n",
    "\n",
    "from scipy.spatial import KDTree\n",
    "\n",
    "class MyKNeighborsClassifier(NeighborsBase, KNeighborsMixin, SupervisedIntegerMixin, ClassifierMixin):\n",
    "    \n",
    "    def __init__(self, n_neighbors, algorithm='brute'):\n",
    "        self.neighbors = n_neighbors\n",
    "        self.algorithm = algorithm\n",
    "    \n",
    "    def fit(self, X, y):\n",
    "        if self.algorithm == 'kd_tree':\n",
    "            self.data = KDTree(X)\n",
    "        else:\n",
    "            self.data = X\n",
    "        \n",
    "        self.labels = y\n",
    "    \n",
    "    def predict(self, X):\n",
    "        if self.algorithm == 'kd_tree':\n",
    "            indexes = self.data.query(X, k=self.neighbors)[1]\n",
    "            \n",
    "            # make a list of k neighbors targets\n",
    "            k_nearest = self.labels[indexes].T\n",
    "            \n",
    "            # return most common values\n",
    "            # numpy changes dtype of k_nearest to \"np.ndarray\" so workaround .astype(type(self.labels[0])\n",
    "            return mode(k_nearest.astype(type(self.labels[0])), axis=0)[0]\n",
    "        else:\n",
    "            # calculate distances\n",
    "            distances = cdist(self.data, X)\n",
    "\n",
    "            # make a list of k neighbors targets\n",
    "            indexes = np.argpartition(distances, self.neighbors, axis=0)\n",
    "            \n",
    "            k_nearest = self.labels[indexes[:self.neighbors]]\n",
    "\n",
    "            # return most common values\n",
    "            # numpy changes dtype of k_nearest to \"np.ndarray\" so workaround .astype(type(self.labels[0])\n",
    "            return mode(k_nearest.astype(type(self.labels[0])), axis=0)[0]\n",
    "        \n",
    "    def predict_proba(self, X):\n",
    "        if self.algorithm == 'kd_tree':\n",
    "            indexes = self.data.query(X, k=self.neighbors)[1]\n",
    "            \n",
    "            k_nearest = self.labels[indexes]\n",
    "            \n",
    "        else:\n",
    "            # calculate distances\n",
    "            distances = cdist(self.data, X)\n",
    "\n",
    "            # make a list of k neighbors targets\n",
    "            indexes = np.argpartition(distances, self.neighbors, axis=0)\n",
    "            k_nearest = self.labels[indexes[:self.neighbors]]\n",
    "        \n",
    "        unique = []\n",
    "        pos = []\n",
    "        \n",
    "        for column in np.arange(0, k_nearest.shape[1]):\n",
    "            cur_unique, cur_pos = np.unique(k_nearest[:, column], return_inverse=True)\n",
    "            unique.append(cur_unique)\n",
    "            pos.append(cur_pos)\n",
    "\n",
    "        counts = np.asarray(list(map(lambda x: np.bincount(x), pos)))\n",
    "    \n",
    "        all_classes = np.unique(self.labels)\n",
    "        all_rows = np.arange(0, X.shape[0])\n",
    "        \n",
    "        probabilities = []\n",
    "        for row in all_rows:\n",
    "            cur_probabilities = {key: 0 for key in all_classes}\n",
    "            for cur_unique, cur_count in zip(unique[row], counts[row]):\n",
    "                cur_probabilities[cur_unique] = cur_count\n",
    "                \n",
    "            probabilities.append((list(map(float, cur_probabilities.values()))))\n",
    "            \n",
    "        # normalize before returning\n",
    "        return np.asarray(probabilities) / np.asarray(probabilities).sum(axis=1, keepdims=True)\n",
    "    \n",
    "    def score(self, X, y):\n",
    "        return (self.predict(X) == y).sum() / y.size"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**IRIS**"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "iris = datasets.load_iris()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=0.1, stratify=iris.target)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [],
   "source": [
    "clf = KNeighborsClassifier(n_neighbors=2, algorithm='brute')\n",
    "my_clf = MyKNeighborsClassifier(n_neighbors=2, algorithm='brute')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 1.1 ms, sys: 445 µs, total: 1.55 ms\n",
      "Wall time: 1.16 ms\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "KNeighborsClassifier(algorithm='brute', leaf_size=30, metric='minkowski',\n",
       "           metric_params=None, n_jobs=None, n_neighbors=2, p=2,\n",
       "           weights='uniform')"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 8 µs, sys: 0 ns, total: 8 µs\n",
      "Wall time: 12.2 µs\n"
     ]
    }
   ],
   "source": [
    "%time my_clf.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 2.88 ms, sys: 1.81 ms, total: 4.69 ms\n",
      "Wall time: 4.6 ms\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([2, 2, 2, 0, 0, 0, 0, 0, 2, 1, 1, 1, 2, 1, 2])"
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.predict(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 2.11 ms, sys: 1.39 ms, total: 3.51 ms\n",
      "Wall time: 2.31 ms\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([[2, 2, 2, 0, 0, 0, 0, 0, 2, 1, 1, 1, 2, 1, 2]])"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time my_clf.predict(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 1.16 ms, sys: 596 µs, total: 1.76 ms\n",
      "Wall time: 1.21 ms\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([[0. , 0. , 1. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [0. , 1. , 0. ],\n",
       "       [0. , 0.5, 0.5],\n",
       "       [0. , 1. , 0. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [0. , 1. , 0. ],\n",
       "       [0. , 0. , 1. ]])"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.predict_proba(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 2.45 ms, sys: 1.94 ms, total: 4.39 ms\n",
      "Wall time: 3.12 ms\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([[0. , 0. , 1. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [1. , 0. , 0. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [0. , 1. , 0. ],\n",
       "       [0. , 0.5, 0.5],\n",
       "       [0. , 1. , 0. ],\n",
       "       [0. , 0. , 1. ],\n",
       "       [0. , 1. , 0. ],\n",
       "       [0. , 0. , 1. ]])"
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time my_clf.predict_proba(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0.8"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clf.score(X_test, y_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0.8"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "my_clf.score(X_test, y_test)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Задание 3"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "highest score is at 1 neighbors\n"
     ]
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 1008x576 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig = plt.figure(figsize= (14,8))\n",
    "ax = plt.subplot(111)\n",
    "\n",
    "ax.set_xlabel('n_neighbors')\n",
    "ax.set_ylabel('score')\n",
    "\n",
    "scores = []\n",
    "neighbors = np.arange(1,X_train.shape[0])\n",
    "for neighbor in neighbors:\n",
    "    my_clf = MyKNeighborsClassifier(n_neighbors=neighbor, algorithm='brute')\n",
    "    cur_scores = np.empty(10)\n",
    "    \n",
    "    # calculate mean score\n",
    "    fold = 10\n",
    "    for i in range(0, fold):\n",
    "        # handmade k-fold cross validation\n",
    "        X_train, a, y_train, b = train_test_split(iris.data, iris.target, test_size=0.1, stratify=iris.target)\n",
    "        my_clf.fit(X_train, y_train)\n",
    "        \n",
    "        cur_scores[i] = my_clf.score(X_test, y_test)\n",
    "    \n",
    "    scores.append(cur_scores.mean())\n",
    "\n",
    "plt.plot(neighbors, scores)\n",
    "\n",
    "optimal_n = neighbors[scores.index(max(scores))]\n",
    "print(\"highest score is at %d neighbors\" % optimal_n)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**MNIST**"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.datasets import fetch_openml\n",
    "\n",
    "mnist = fetch_openml('mnist_784')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_train, X_test, y_train, y_test = train_test_split(mnist.data, mnist.target, test_size=0.01, stratify=mnist.target)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [],
   "source": [
    "clf = KNeighborsClassifier(n_neighbors=2, algorithm='brute')\n",
    "my_clf = MyKNeighborsClassifier(n_neighbors=2, algorithm='brute')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 167 ms, sys: 2.6 ms, total: 170 ms\n",
      "Wall time: 169 ms\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "KNeighborsClassifier(algorithm='brute', leaf_size=30, metric='minkowski',\n",
       "           metric_params=None, n_jobs=None, n_neighbors=2, p=2,\n",
       "           weights='uniform')"
      ]
     },
     "execution_count": 18,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 8 µs, sys: 0 ns, total: 8 µs\n",
      "Wall time: 11.7 µs\n"
     ]
    }
   ],
   "source": [
    "%time my_clf.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 3.32 s, sys: 283 ms, total: 3.6 s\n",
      "Wall time: 2.19 s\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array(['1', '9', '4', '7', '9', '5', '1', '3', '7', '5', '3', '9', '9',\n",
       "       '6', '1', '9', '2', '3', '2', '1', '6', '6', '4', '2', '2', '3',\n",
       "       '6', '8', '0', '3', '6', '3', '5', '3', '8', '5', '3', '5', '9',\n",
       "       '5', '4', '0', '9', '1', '1', '4', '8', '1', '6', '9', '5', '0',\n",
       "       '6', '0', '4', '6', '1', '9', '4', '8', '7', '9', '1', '6', '5',\n",
       "       '2', '0', '8', '7', '4', '6', '1', '9', '3', '4', '2', '8', '5',\n",
       "       '7', '8', '9', '4', '2', '0', '3', '6', '1', '3', '8', '9', '4',\n",
       "       '9', '5', '7', '1', '1', '1', '9', '9', '3', '1', '7', '8', '6',\n",
       "       '1', '7', '4', '4', '4', '1', '9', '6', '6', '6', '5', '1', '4',\n",
       "       '2', '3', '0', '0', '5', '7', '8', '7', '6', '3', '6', '2', '6',\n",
       "       '9', '7', '0', '2', '6', '7', '2', '9', '1', '2', '0', '5', '5',\n",
       "       '1', '5', '0', '9', '9', '2', '1', '6', '9', '6', '7', '3', '0',\n",
       "       '2', '7', '7', '5', '2', '5', '4', '8', '4', '2', '3', '0', '1',\n",
       "       '0', '1', '8', '5', '4', '2', '3', '5', '9', '3', '0', '1', '2',\n",
       "       '6', '6', '0', '6', '8', '8', '6', '7', '4', '7', '4', '1', '8',\n",
       "       '7', '8', '3', '6', '1', '6', '5', '9', '1', '9', '6', '7', '1',\n",
       "       '1', '6', '8', '2', '7', '1', '0', '2', '5', '1', '0', '1', '4',\n",
       "       '9', '4', '4', '7', '4', '6', '0', '0', '7', '4', '8', '5', '7',\n",
       "       '3', '8', '2', '9', '1', '9', '6', '7', '2', '2', '1', '8', '5',\n",
       "       '9', '1', '0', '9', '2', '8', '5', '3', '4', '0', '3', '4', '4',\n",
       "       '4', '3', '0', '2', '8', '5', '3', '2', '0', '8', '2', '9', '0',\n",
       "       '8', '3', '7', '0', '5', '8', '9', '3', '2', '5', '5', '1', '4',\n",
       "       '2', '7', '4', '1', '0', '8', '1', '6', '9', '8', '8', '4', '2',\n",
       "       '4', '0', '9', '2', '0', '7', '0', '3', '0', '6', '4', '4', '4',\n",
       "       '9', '2', '4', '2', '8', '6', '9', '6', '5', '5', '2', '7', '0',\n",
       "       '7', '0', '5', '0', '0', '9', '6', '6', '4', '7', '9', '4', '2',\n",
       "       '7', '4', '9', '3', '8', '8', '7', '1', '5', '3', '5', '5', '4',\n",
       "       '1', '0', '9', '9', '0', '5', '1', '6', '6', '9', '7', '2', '1',\n",
       "       '4', '8', '7', '1', '4', '8', '9', '2', '3', '8', '1', '6', '3',\n",
       "       '1', '2', '8', '3', '4', '0', '1', '8', '8', '4', '2', '8', '1',\n",
       "       '2', '3', '2', '7', '7', '3', '3', '6', '3', '1', '8', '4', '7',\n",
       "       '2', '3', '4', '6', '9', '7', '8', '8', '1', '5', '1', '3', '2',\n",
       "       '8', '0', '5', '4', '9', '6', '9', '6', '7', '0', '9', '4', '5',\n",
       "       '0', '9', '1', '3', '1', '1', '5', '9', '2', '9', '1', '9', '3',\n",
       "       '4', '7', '5', '0', '9', '4', '7', '7', '1', '0', '6', '2', '5',\n",
       "       '7', '9', '1', '7', '0', '4', '0', '7', '0', '2', '8', '5', '0',\n",
       "       '0', '5', '6', '9', '2', '2', '2', '5', '1', '4', '1', '0', '6',\n",
       "       '9', '6', '1', '4', '2', '3', '6', '5', '3', '6', '7', '0', '7',\n",
       "       '7', '3', '2', '9', '9', '8', '8', '5', '1', '7', '2', '1', '5',\n",
       "       '7', '1', '1', '6', '7', '5', '4', '9', '4', '9', '2', '9', '3',\n",
       "       '1', '6', '3', '0', '6', '7', '9', '1', '8', '5', '0', '8', '1',\n",
       "       '0', '8', '8', '6', '6', '1', '2', '4', '4', '5', '6', '0', '7',\n",
       "       '1', '1', '3', '5', '1', '3', '8', '2', '7', '4', '3', '9', '4',\n",
       "       '3', '3', '3', '0', '5', '7', '8', '6', '2', '2', '8', '2', '2',\n",
       "       '4', '5', '2', '6', '7', '2', '0', '9', '1', '8', '7', '4', '0',\n",
       "       '7', '5', '3', '2', '1', '0', '1', '7', '4', '3', '0', '4', '7',\n",
       "       '1', '8', '1', '8', '3', '7', '3', '6', '3', '5', '6', '6', '0',\n",
       "       '6', '3', '7', '0', '0', '2', '0', '3', '1', '8', '5', '6', '2',\n",
       "       '0', '9', '3', '6', '8', '7', '0', '0', '1', '2', '6', '6', '4',\n",
       "       '5', '3', '3', '5', '5', '2', '3', '2', '6', '9', '0', '4', '5',\n",
       "       '9', '9', '8', '7', '0', '4', '2', '5', '7', '5', '8', '0', '2',\n",
       "       '0', '8', '9', '3', '8', '2', '7', '2', '6', '2', '0', '1', '9',\n",
       "       '4', '9', '7', '7', '7', '1', '3', '4', '1', '8', '6', '4', '2',\n",
       "       '6', '7', '3', '1', '7', '3', '3', '1', '3', '9', '3'],\n",
       "      dtype=object)"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.predict(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 41 s, sys: 907 ms, total: 41.9 s\n",
      "Wall time: 42.4 s\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/usr/local/lib/python3.7/site-packages/scipy/stats/stats.py:248: RuntimeWarning: The input array could not be properly checked for nan values. nan values will be ignored.\n",
      "  \"values. nan values will be ignored.\", RuntimeWarning)\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([['1', '9', '4', '7', '9', '5', '1', '3', '7', '5', '3', '9', '9',\n",
       "        '6', '1', '9', '2', '3', '2', '1', '6', '6', '4', '2', '2', '3',\n",
       "        '6', '8', '0', '3', '6', '3', '5', '3', '8', '5', '3', '5', '9',\n",
       "        '5', '4', '0', '9', '1', '1', '4', '8', '1', '6', '9', '5', '0',\n",
       "        '6', '0', '4', '6', '1', '9', '4', '8', '7', '9', '1', '6', '5',\n",
       "        '2', '0', '8', '7', '4', '6', '1', '9', '3', '4', '2', '8', '5',\n",
       "        '7', '8', '9', '4', '2', '0', '3', '6', '1', '3', '8', '9', '4',\n",
       "        '9', '5', '7', '1', '1', '1', '9', '9', '3', '1', '7', '8', '6',\n",
       "        '1', '7', '4', '4', '4', '1', '9', '6', '6', '6', '5', '1', '4',\n",
       "        '2', '3', '0', '0', '5', '7', '8', '7', '6', '3', '6', '2', '6',\n",
       "        '9', '7', '0', '2', '6', '7', '2', '9', '1', '2', '0', '5', '5',\n",
       "        '1', '5', '0', '9', '9', '2', '1', '6', '9', '6', '7', '3', '0',\n",
       "        '2', '7', '7', '5', '2', '5', '4', '8', '4', '2', '3', '0', '1',\n",
       "        '0', '1', '8', '5', '4', '2', '3', '5', '9', '3', '0', '1', '2',\n",
       "        '6', '6', '0', '6', '8', '8', '6', '7', '4', '7', '4', '1', '8',\n",
       "        '7', '8', '3', '6', '1', '6', '5', '9', '1', '9', '6', '7', '1',\n",
       "        '1', '6', '8', '2', '7', '1', '0', '2', '5', '1', '0', '1', '4',\n",
       "        '9', '4', '4', '7', '4', '6', '0', '0', '7', '4', '8', '5', '7',\n",
       "        '3', '8', '2', '9', '1', '9', '6', '7', '2', '2', '1', '8', '5',\n",
       "        '9', '1', '0', '9', '2', '8', '5', '3', '4', '0', '3', '4', '4',\n",
       "        '4', '3', '0', '2', '8', '5', '3', '2', '0', '8', '2', '9', '0',\n",
       "        '8', '3', '7', '0', '5', '8', '9', '3', '2', '5', '5', '1', '4',\n",
       "        '2', '7', '4', '1', '0', '8', '1', '6', '9', '8', '8', '4', '2',\n",
       "        '4', '0', '9', '2', '0', '7', '0', '3', '0', '6', '4', '4', '4',\n",
       "        '9', '2', '4', '2', '8', '6', '9', '6', '5', '5', '2', '7', '0',\n",
       "        '7', '0', '5', '0', '0', '9', '6', '6', '4', '7', '9', '4', '2',\n",
       "        '7', '4', '9', '3', '8', '8', '7', '1', '5', '3', '5', '5', '4',\n",
       "        '1', '0', '9', '9', '0', '5', '1', '6', '6', '9', '7', '2', '1',\n",
       "        '4', '8', '7', '1', '4', '8', '9', '2', '3', '8', '1', '6', '3',\n",
       "        '1', '2', '8', '3', '4', '0', '1', '8', '8', '4', '2', '8', '1',\n",
       "        '2', '3', '2', '7', '7', '3', '3', '6', '3', '1', '8', '4', '7',\n",
       "        '2', '3', '4', '6', '9', '7', '8', '8', '1', '5', '1', '3', '2',\n",
       "        '8', '0', '5', '4', '9', '6', '9', '6', '7', '0', '9', '4', '5',\n",
       "        '0', '9', '1', '3', '1', '1', '5', '9', '2', '9', '1', '9', '3',\n",
       "        '4', '7', '5', '0', '9', '4', '7', '7', '1', '0', '6', '2', '5',\n",
       "        '7', '9', '1', '7', '0', '4', '0', '7', '0', '2', '8', '5', '0',\n",
       "        '0', '5', '6', '9', '2', '2', '2', '5', '1', '4', '1', '0', '6',\n",
       "        '9', '6', '1', '4', '2', '3', '6', '5', '3', '6', '7', '0', '7',\n",
       "        '7', '3', '2', '9', '9', '8', '8', '5', '1', '7', '2', '1', '5',\n",
       "        '7', '1', '1', '6', '7', '5', '4', '9', '4', '9', '2', '9', '3',\n",
       "        '1', '6', '3', '0', '6', '7', '9', '1', '8', '5', '0', '8', '1',\n",
       "        '0', '8', '8', '6', '6', '1', '2', '4', '4', '5', '6', '0', '7',\n",
       "        '1', '1', '3', '5', '1', '3', '8', '2', '7', '4', '3', '9', '4',\n",
       "        '3', '3', '3', '0', '5', '7', '8', '6', '2', '2', '8', '2', '2',\n",
       "        '4', '5', '2', '6', '7', '2', '0', '9', '1', '8', '7', '4', '0',\n",
       "        '7', '5', '3', '2', '1', '0', '1', '7', '4', '3', '0', '4', '7',\n",
       "        '1', '8', '1', '8', '3', '7', '3', '6', '3', '5', '6', '6', '0',\n",
       "        '6', '3', '7', '0', '0', '2', '0', '3', '1', '8', '5', '6', '2',\n",
       "        '0', '9', '3', '6', '8', '7', '0', '0', '1', '2', '6', '6', '4',\n",
       "        '5', '3', '3', '5', '5', '2', '3', '2', '6', '9', '0', '4', '5',\n",
       "        '9', '9', '8', '7', '0', '4', '2', '5', '7', '5', '8', '0', '2',\n",
       "        '0', '8', '9', '3', '8', '2', '7', '2', '6', '2', '0', '1', '9',\n",
       "        '4', '9', '7', '7', '7', '1', '3', '4', '1', '8', '6', '4', '2',\n",
       "        '6', '7', '3', '1', '7', '3', '3', '1', '3', '9', '3']],\n",
       "      dtype='<U1')"
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time my_clf.predict(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 3.53 s, sys: 313 ms, total: 3.85 s\n",
      "Wall time: 2.41 s\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([[0., 1., 0., ..., 0., 0., 0.],\n",
       "       [0., 0., 0., ..., 0., 0., 1.],\n",
       "       [0., 0., 0., ..., 0., 0., 0.],\n",
       "       ...,\n",
       "       [0., 0., 0., ..., 0., 0., 0.],\n",
       "       [0., 0., 0., ..., 0., 0., 1.],\n",
       "       [0., 0., 0., ..., 0., 0., 0.]])"
      ]
     },
     "execution_count": 22,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.predict_proba(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 41.1 s, sys: 952 ms, total: 42 s\n",
      "Wall time: 42.7 s\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array([[0., 1., 0., ..., 0., 0., 0.],\n",
       "       [0., 0., 0., ..., 0., 0., 1.],\n",
       "       [0., 0., 0., ..., 0., 0., 0.],\n",
       "       ...,\n",
       "       [0., 0., 0., ..., 0., 0., 0.],\n",
       "       [0., 0., 0., ..., 0., 0., 1.],\n",
       "       [0., 0., 0., ..., 0., 0., 0.]])"
      ]
     },
     "execution_count": 23,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time my_clf.predict_proba(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "0.9714285714285714"
      ]
     },
     "execution_count": 24,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "clf.score(X_test, y_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "/usr/local/lib/python3.7/site-packages/scipy/stats/stats.py:248: RuntimeWarning: The input array could not be properly checked for nan values. nan values will be ignored.\n",
      "  \"values. nan values will be ignored.\", RuntimeWarning)\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "0.9714285714285714"
      ]
     },
     "execution_count": 25,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "my_clf.score(X_test, y_test)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Задание 4"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [],
   "source": [
    "clf = KNeighborsClassifier(n_neighbors=2, algorithm='kd_tree')\n",
    "my_clf = MyKNeighborsClassifier(n_neighbors=2, algorithm='kd_tree')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [],
   "source": [
    "X_train, X_test, y_train, y_test = train_test_split(mnist.data, mnist.target, test_size=0.01, stratify=mnist.target)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 37.8 s, sys: 352 ms, total: 38.1 s\n",
      "Wall time: 38.5 s\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "KNeighborsClassifier(algorithm='kd_tree', leaf_size=30, metric='minkowski',\n",
       "           metric_params=None, n_jobs=None, n_neighbors=2, p=2,\n",
       "           weights='uniform')"
      ]
     },
     "execution_count": 28,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 22.5 s, sys: 25.1 s, total: 47.6 s\n",
      "Wall time: 52.6 s\n"
     ]
    }
   ],
   "source": [
    "%time my_clf.fit(X_train, y_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 57.9 s, sys: 488 ms, total: 58.4 s\n",
      "Wall time: 59.4 s\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "array(['1', '4', '4', '1', '3', '1', '7', '7', '0', '8', '8', '4', '7',\n",
       "       '8', '7', '4', '1', '5', '6', '2', '4', '6', '4', '6', '8', '9',\n",
       "       '0', '4', '3', '1', '4', '4', '1', '4', '2', '5', '0', '1', '6',\n",
       "       '6', '6', '0', '5', '4', '3', '3', '3', '5', '3', '5', '9', '4',\n",
       "       '6', '2', '2', '9', '7', '2', '4', '0', '8', '0', '1', '1', '6',\n",
       "       '0', '9', '5', '2', '2', '8', '8', '7', '1', '9', '3', '1', '2',\n",
       "       '2', '7', '5', '3', '8', '8', '7', '9', '2', '8', '4', '2', '7',\n",
       "       '2', '9', '7', '7', '6', '0', '9', '1', '9', '4', '4', '1', '1',\n",
       "       '4', '1', '8', '2', '5', '1', '9', '0', '6', '6', '4', '0', '3',\n",
       "       '1', '3', '0', '9', '0', '0', '1', '9', '7', '3', '6', '9', '2',\n",
       "       '4', '3', '2', '2', '3', '7', '1', '6', '0', '6', '7', '7', '7',\n",
       "       '0', '0', '6', '7', '6', '4', '9', '2', '5', '7', '0', '9', '9',\n",
       "       '1', '3', '1', '0', '7', '4', '1', '2', '7', '9', '6', '7', '8',\n",
       "       '1', '5', '8', '6', '7', '9', '9', '0', '9', '3', '1', '4', '7',\n",
       "       '2', '2', '5', '8', '8', '2', '0', '0', '0', '1', '8', '7', '3',\n",
       "       '5', '6', '2', '5', '6', '1', '9', '3', '4', '4', '6', '0', '5',\n",
       "       '9', '3', '0', '0', '5', '7', '1', '3', '3', '3', '7', '8', '0',\n",
       "       '8', '5', '1', '9', '2', '6', '8', '7', '2', '3', '3', '0', '7',\n",
       "       '1', '5', '3', '0', '3', '5', '1', '3', '9', '6', '5', '9', '6',\n",
       "       '2', '1', '2', '4', '7', '3', '8', '5', '4', '1', '8', '1', '7',\n",
       "       '3', '1', '4', '3', '5', '7', '1', '8', '8', '1', '6', '9', '5',\n",
       "       '2', '1', '7', '1', '0', '3', '2', '8', '6', '1', '4', '5', '2',\n",
       "       '2', '1', '8', '5', '7', '8', '3', '9', '8', '0', '2', '1', '8',\n",
       "       '4', '4', '9', '8', '1', '5', '5', '1', '0', '7', '8', '2', '6',\n",
       "       '1', '2', '2', '8', '7', '9', '6', '6', '8', '4', '0', '7', '0',\n",
       "       '4', '5', '3', '5', '9', '6', '8', '0', '6', '2', '3', '8', '1',\n",
       "       '7', '2', '6', '3', '4', '6', '4', '3', '0', '8', '3', '9', '7',\n",
       "       '6', '2', '8', '4', '6', '9', '3', '4', '6', '5', '0', '0', '8',\n",
       "       '7', '7', '9', '4', '4', '2', '9', '8', '8', '4', '8', '0', '0',\n",
       "       '4', '7', '9', '8', '2', '1', '9', '5', '9', '8', '6', '7', '6',\n",
       "       '9', '0', '0', '0', '9', '7', '7', '1', '0', '5', '8', '2', '7',\n",
       "       '6', '7', '7', '1', '6', '2', '3', '1', '3', '1', '5', '7', '1',\n",
       "       '6', '6', '5', '0', '3', '9', '6', '7', '4', '4', '1', '9', '6',\n",
       "       '1', '2', '1', '1', '1', '3', '0', '0', '6', '3', '3', '9', '6',\n",
       "       '3', '6', '0', '9', '1', '9', '8', '2', '5', '4', '5', '3', '8',\n",
       "       '2', '0', '0', '6', '5', '4', '0', '7', '1', '7', '1', '4', '9',\n",
       "       '8', '5', '6', '5', '3', '3', '1', '9', '8', '5', '6', '1', '7',\n",
       "       '1', '0', '4', '2', '7', '0', '1', '5', '4', '5', '0', '2', '9',\n",
       "       '8', '6', '8', '1', '6', '3', '7', '0', '9', '2', '3', '9', '7',\n",
       "       '7', '0', '7', '6', '2', '5', '4', '3', '5', '4', '2', '8', '7',\n",
       "       '0', '0', '0', '1', '4', '5', '4', '7', '6', '8', '7', '0', '2',\n",
       "       '0', '3', '9', '5', '0', '1', '3', '8', '5', '9', '6', '3', '8',\n",
       "       '8', '2', '2', '3', '7', '2', '6', '1', '1', '3', '3', '3', '5',\n",
       "       '2', '3', '9', '2', '0', '4', '7', '9', '6', '5', '1', '7', '9',\n",
       "       '3', '0', '4', '1', '4', '1', '7', '0', '2', '2', '1', '1', '0',\n",
       "       '4', '2', '6', '2', '3', '4', '8', '7', '4', '9', '6', '8', '9',\n",
       "       '5', '7', '9', '1', '3', '3', '2', '2', '0', '7', '3', '8', '0',\n",
       "       '9', '1', '9', '6', '6', '2', '6', '0', '5', '9', '1', '7', '9',\n",
       "       '5', '4', '3', '6', '2', '7', '3', '8', '2', '7', '4', '0', '4',\n",
       "       '3', '1', '1', '9', '1', '5', '9', '3', '3', '4', '9', '8', '7',\n",
       "       '9', '9', '9', '5', '2', '9', '6', '9', '0', '2', '3', '2', '8',\n",
       "       '4', '8', '8', '1', '1', '4', '8', '9', '2', '1', '6', '0', '3',\n",
       "       '7', '6', '5', '1', '9', '5', '5', '5', '5', '9', '4', '4', '5',\n",
       "       '3', '4', '5', '4', '3', '6', '7', '8', '5', '6', '0'],\n",
       "      dtype=object)"
      ]
     },
     "execution_count": 30,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "%time clf.predict(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "%time my_clf.predict(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "%time clf.predict_proba(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "%time my_clf.predict_proba(X_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "clf.score(X_test, y_test)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "my_clf.score(X_test, y_test)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Задание 5"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "# seaborn\n",
    "# outofthebox решение для визуализации данных построенное на matplotlib\n",
    "\n",
    "# matplotlib\n",
    "# библиотека для визуализации данных\n",
    "\n",
    "# train_test_split\n",
    "# разбивает входные данные на train и test подмножества\n",
    "\n",
    "# Pipelin%load_ext e (from sklearn.pipeline import Pipeline)\n",
    "# нужна для того чтобы последовательно обработать данные разными алгоритмами,\n",
    "# задавая им различные параматры и проверить на кросс валидации\n",
    "\n",
    "# StandardScaler (from sklearn.preprocessing import StandardScaler)\n",
    "# нужен для того чтобы нормировать фичи перед тем как использовать на них алгоритмы\n",
    "\n",
    "# ClassifierMixin\n",
    "# mixin класс для скоринговых классов\n",
    "\n",
    "# NeighborsBase\n",
    "# mixin для выбора оптимального алгоритма поиска ближайших соседей\n",
    "\n",
    "# KNeighborsMixin\n",
    "# mixin для с brute алгоритмом\n",
    "\n",
    "# SupervisedIntegerMixin\n",
    "# проверяет параметры fit и вызывает настоящую функцию"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.2"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
